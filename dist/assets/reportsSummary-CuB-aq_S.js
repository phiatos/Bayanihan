import"./global-Dd8t204S.js";/* empty css                */import"./global-ol2E3RMO.js";import"./index.esm2017-CKqBSwm5.js";function b(r){const n=new Date(r);return isNaN(n)?r:n.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function v(r){const[n,s]=r.split(":");let e=parseInt(n,10);const p=parseInt(s,10),l=e>=12?"PM":"AM";return e=e%12||12,`${e}:${p.toString().padStart(2,"0")} ${l}`}document.addEventListener("DOMContentLoaded",()=>{const r={apiKey:"AIzaSyDJxMv8GCaMvQT2QBW3CdzA3dV5X_T2KqQ",authDomain:"bayanihan-5ce7e.firebaseapp.com",databaseURL:"https://bayanihan-5ce7e-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"bayanihan-5ce7e",storageBucket:"bayanihan-5ce7e.appspot.com",messagingSenderId:"593123849917",appId:"1:593123849917:web:eb85a63a536eeff78ce9d4",measurementId:"G-ZTQ9VXXVV0"};firebase.initializeApp(r);const n=firebase.auth(),s=firebase.database(),e=JSON.parse(localStorage.getItem("reportData")),p=document.getElementById("summaryContainer");if(!e){Swal.fire({icon:"error",title:"No Report Data",text:"No report data found. Please go back and submit the form again."}).then(()=>{window.location.href="../pages/reportssubmission.html"});return}const l="-OPTGsB_vPQd5MNQPtpv",u=s.ref(`reports/pending/${l}`),g=s.ref(`reports/approved/${l}`);Promise.all([u.remove().catch(t=>{console.error(`Error removing report from pending: ${t.message}`)}),g.remove().catch(t=>{console.error(`Error removing report from approved: ${t.message}`)})]).then(()=>{console.log(`Report with key ${l} has been removed from the database.`);const t={"Basic Information":["ReportID","AreaOfOperation","DateOfReport"],"Relief Operations":["CalamityAreaDetails","TimeOfIntervention","StartDate","EndDate","NoOfOrganizationsActivated","NoOfIndividualsOrFamilies","NoOfFoodPacks","NoOfHotMeals","LitersOfWater","NoOfVolunteersMobilized","TotalValueOfInKindDonations","TotalMonetaryDonations"],"Additional Updates":["NotesAdditionalInformation"]};for(let c in t){const a=document.createElement("div");a.className="category-section";const d=document.createElement("div");d.className="category-title",d.textContent=c,a.appendChild(d),t[c].forEach(o=>{if(e.hasOwnProperty(o)){let m=o.replace(/([A-Z])/g," $1").replace(/^./,h=>h.toUpperCase());m=m.replace("AreaOfOperation","Area of Operation").replace("TimeOfIntervention","Completion of Time Intervention").replace("CalamityAreaDetails","Calamity Area").replace("DateOfReport","Date of Report").replace("ReportID","Report ID").replace("StartDate","Start Date").replace("EndDate","End Date").replace("VolunteerGroupName","Volunteer Group").replace("NoOfIndividualsOrFamilies","No. of Individuals or Families").replace("NoOfFoodPacks","No. of Food Packs").replace("NoOfHotMeals","No. of Hot Meals").replace("LitersOfWater","Liters of Water").replace("NoOfVolunteersMobilized","No. of Volunteers Mobilized").replace("NoOfOrganizationsActivated","No. of Organizations Activated").replace("TotalValueOfInKindDonations","Total Value of In-Kind Donations").replace("TotalMonetaryDonations","Total Monetary Donations").replace("NotesAdditionalInformation","Notes/additional information");let i=e[o];o==="DateOfReport"||o==="StartDate"||o==="EndDate"?i=b(i):o==="TimeOfIntervention"&&(i=v(i));const f=document.createElement("div");f.className="summary-box",f.innerHTML=`<strong>${m}:</strong> <span>${i===""?"N/A":i}</span>`,a.appendChild(f)}}),p.appendChild(a)}document.getElementById("backBtn").addEventListener("click",()=>{window.history.back(),localStorage.setItem("returnToStep","form-container-2")}),document.getElementById("submitBtn").addEventListener("click",()=>{n.onAuthStateChanged(c=>{if(!c){Swal.fire({icon:"error",title:"Authentication Required",text:"Please sign in to submit a report."}).then(()=>{window.location.href="../pages/login.html"});return}e.userUid=c.uid,e.Status="Pending",e.Timestamp=firebase.database.ServerValue.TIMESTAMP,s.ref("reports/submitted").push(e).then(()=>{console.log("Report successfully saved to Firebase"),localStorage.removeItem("reportData"),localStorage.removeItem("returnToStep"),Swal.fire({icon:"success",title:"Report Submitted",text:"Your report has been successfully submitted for verification!"}).then(()=>{window.location.href="../pages/dashboard.html"})}).catch(a=>{console.error("Error saving report to Firebase:",a),Swal.fire({icon:"error",title:"Error",text:"Failed to submit report: "+a.message})})})})}).catch(t=>{console.error("Error during report removal process:",t),Swal.fire({icon:"error",title:"Error",text:"Failed to process report removal. Please try again."})})});
